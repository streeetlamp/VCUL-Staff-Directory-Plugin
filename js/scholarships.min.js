!function(s,e,t,o){"use strict";function a(){var e=s.parseJSON(sessionStorage.getItem("form_data"));c.val(e.grade),h.val(e.gpa),u.val(e.citizenship),f.val(e.state)}function i(){v.html(b.filter(":visible").length)}function r(e){var t=s.parseJSON(e);p.show(),S.html("").append(t),b=S.find("article"),i()}function n(e){g.find("input:checkbox").removeAttr("checked"),S.html('<div class="wsuwp-scholarships-loading"></div>'),s.post(o.ajax_url,e,function(s){sessionStorage.setItem("results",s),r(s)})}var l=s(".wsuwp-scholarships-form"),c=s("#wsuwp-scholarship-grade-level"),h=s("#wsuwp-scholarship-gpa"),u=s("#wsuwp-scholarship-citizenship"),f=s("#wsuwp-scholarship-state"),p=s(".display-after-submit"),d=s(".wsuwp-scholarships-toggle-filters"),g=s(".wsuwp-scholarships-filters"),v=s(".wsuwp-scholarships-count span"),m=s(".wsuwp-scholarships-header"),w=s(".wsuwp-scholarships-tools"),S=s(".wsuwp-scholarships"),b="",I=s(".back-to-top");g.hide(),m.hide(),s(t).ready(function(){if(-1!==e.location.href.indexOf("?")&&(sessionStorage.removeItem("form_data"),sessionStorage.removeItem("results"),sessionStorage.removeItem("filters"),l.trigger("submit")),function(s){try{var t=e[s],o="__storage_test__";return t.setItem(o,o),t.removeItem(o),!0}catch(s){return!1}}("sessionStorage")){var t=sessionStorage.getItem("results"),o=JSON.parse(sessionStorage.getItem("filters"));sessionStorage.getItem("form_data")&&a(),t&&r(t),o&&s.each(o,function(){s("#"+this).trigger("click")})}}),d.on("click","a",function(s){s.preventDefault(),d.hasClass("close-filters")?(d.removeClass("close-filters"),g.slideUp()):(d.addClass("close-filters"),g.slideDown())}),l.on("submit",function(s){s.preventDefault();var e={action:"set_scholarships",nonce:o.nonce,grade:c.val(),gpa:h.val(),citizenship:u.val(),state:f.val()};!function(){var s={grade:c.val(),gpa:h.val(),citizenship:u.val(),state:f.val()};sessionStorage.setItem("form_data",JSON.stringify(s)),a()}(),n(e)}),s(".column").on("click",".wsuwp-scholarships-all",function(s){s.preventDefault(),l.find("option:selected").removeAttr("selected"),l.find("input:not(:submit)").val(""),sessionStorage.removeItem("form_data"),sessionStorage.removeItem("results"),sessionStorage.removeItem("filters");n({action:"set_scholarships",nonce:o.nonce})}),function(e){m.on("click","a",function(t){t.preventDefault();var o=s(this),a=o.html().toLowerCase();o.hasClass("sorted")?o.toggleClass("asc"):(m.find("a").removeClass("sorted asc"),o.addClass("sorted")),b.sort(function(s,e){var t=s.getAttribute("data-"+a),i=e.getAttribute("data-"+a);return"scholarship"===a&&(t=e.getAttribute("data-"+a),i=s.getAttribute("data-"+a)),o.hasClass("asc")?t-i:i-t}),b.detach().appendTo(S),e()}),g.on("change","input:checkbox",function(){var t=[],o=[];g.find("input:checkbox:checked").each(function(){o.push(s(this).attr("id")),t.push(s(this).val())}),sessionStorage.setItem("filters",JSON.stringify(o)),t.length>0?(b.not(t.join("")).hide(0),b.filter(t.join("")).show(0)):b.show(0),e()})}(function(){S.find("article:visible:odd").css("background-color","#fff"),S.find("article:visible:even").css("background-color","#eff0f1"),i()}),s(t).on("scroll",function(){s(e).scrollTop()>=S.offset().top?w.show():w.hide()}),I.on("click",function(e){e.preventDefault(),s("html, body").scrollTop(0)})}(jQuery,window,document,window.scholarships);