!function(t,o,s,a){"use strict";var r,i=t(".wsuwp-scholarships-form"),n=t("#wsuwp-scholarship-grade-level"),l=t("#wsuwp-scholarship-gpa"),c=t("#wsuwp-scholarship-citizenship"),h=t("#wsuwp-scholarship-state"),u=t(".display-after-submit"),e=t(".wsuwp-scholarships-toggle-filters"),p=t(".wsuwp-scholarships-filters"),d=t(".wsuwp-scholarships-count span"),f=t(".wsuwp-scholarships-header"),v=t(".wsuwp-scholarships-tools"),g=t(".wsuwp-scholarships"),m="",w=t(".back-to-top");function S(){var s=t.parseJSON(sessionStorage.getItem("form_data"));n.val(s.grade),l.val(s.gpa),c.val(s.citizenship),h.val(s.state)}function b(){d.html(m.filter(":visible").length)}function I(s){var e=t.parseJSON(s);u.show(),g.html("").append(e),m=g.find("article"),b()}function k(s){p.find("input:checkbox").removeAttr("checked"),g.html('<div class="wsuwp-scholarships-loading"></div>'),t.post(a.ajax_url,s,function(s){sessionStorage.setItem("results",s),I(s)})}p.hide(),f.hide(),t(s).ready(function(){if(-1!==o.location.href.indexOf("?")&&(sessionStorage.removeItem("form_data"),sessionStorage.removeItem("results"),sessionStorage.removeItem("filters"),i.trigger("submit")),function(s){try{var e=o[s],t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(s){return!1}}("sessionStorage")){var s=sessionStorage.getItem("results"),e=JSON.parse(sessionStorage.getItem("filters"));sessionStorage.getItem("form_data")&&S(),s&&I(s),e&&t.each(e,function(){t("#"+this).trigger("click")})}}),e.on("click","a",function(s){s.preventDefault(),e.hasClass("close-filters")?(e.removeClass("close-filters"),p.slideUp()):(e.addClass("close-filters"),p.slideDown())}),i.on("submit",function(s){s.preventDefault();var e,t={action:"set_scholarships",nonce:a.nonce,grade:n.val(),gpa:l.val(),citizenship:c.val(),state:h.val()};e={grade:n.val(),gpa:l.val(),citizenship:c.val(),state:h.val()},sessionStorage.setItem("form_data",JSON.stringify(e)),S(),k(t)}),t(".column").on("click",".wsuwp-scholarships-all",function(s){s.preventDefault(),i.find("option:selected").removeAttr("selected"),i.find("input:not(:submit)").val(""),sessionStorage.removeItem("form_data"),sessionStorage.removeItem("results"),sessionStorage.removeItem("filters"),k({action:"set_scholarships",nonce:a.nonce})}),r=function(){g.find("article:visible:odd").css("background-color","#fff"),g.find("article:visible:even").css("background-color","#eff0f1"),b()},f.on("click","a",function(s){s.preventDefault();var a=t(this),i=a.html().toLowerCase();a.hasClass("sorted")?a.toggleClass("asc"):(f.find("a").removeClass("sorted asc"),a.addClass("sorted")),m.sort(function(s,e){var t=s.getAttribute("data-"+i),o=e.getAttribute("data-"+i);return"scholarship"===i&&(t=e.getAttribute("data-"+i),o=s.getAttribute("data-"+i)),a.hasClass("asc")?t-o:o-t}),m.detach().appendTo(g),r()}),p.on("change","input:checkbox",function(){var s=[],e=[];p.find("input:checkbox:checked").each(function(){e.push(t(this).attr("id")),s.push(t(this).val())}),sessionStorage.setItem("filters",JSON.stringify(e)),0<s.length?(m.not(s.join("")).addClass("hidden"),m.filter(s.join("")).removeClass("hidden")):m.removeClass("hidden"),r()}),t(s).on("scroll",function(){t(o).scrollTop()>=g.offset().top?v.show():v.hide()}),w.on("click",function(s){s.preventDefault(),t("html, body").scrollTop(0)})}(jQuery,window,document,window.scholarships);