!function(s,e,t,o){"use strict";function a(s){try{var t=e[s],o="__storage_test__";return t.setItem(o,o),t.removeItem(o),!0}catch(s){return!1}}function i(){var e=s.parseJSON(sessionStorage.getItem("form_data"));u.val(e.grade),f.val(e.gpa),p.val(e.citizenship),d.val(e.state)}function r(){var s={grade:u.val(),gpa:f.val(),citizenship:p.val(),state:d.val()};sessionStorage.setItem("form_data",JSON.stringify(s)),i()}function n(){w.html(k.filter(":visible").length)}function l(e){var t=s.parseJSON(e);g.show(),I.html("").append(t),k=I.find("article"),n()}function c(e){m.find("input:checkbox").removeAttr("checked"),I.html('<div class="wsuwp-scholarships-loading"></div>'),s.post(o.ajax_url,e,function(s){sessionStorage.setItem("results",s),l(s)})}var h=s(".wsuwp-scholarships-form"),u=s("#wsuwp-scholarship-grade-level"),f=s("#wsuwp-scholarship-gpa"),p=s("#wsuwp-scholarship-citizenship"),d=s("#wsuwp-scholarship-state"),g=s(".display-after-submit"),v=s(".wsuwp-scholarships-toggle-filters"),m=s(".wsuwp-scholarships-filters"),w=s(".wsuwp-scholarships-count span"),S=s(".wsuwp-scholarships-header"),b=s(".wsuwp-scholarships-tools"),I=s(".wsuwp-scholarships"),k="",_=s(".back-to-top");m.hide(),S.hide(),s(t).ready(function(){if(-1!==e.location.href.indexOf("?")&&(sessionStorage.removeItem("form_data"),sessionStorage.removeItem("results"),sessionStorage.removeItem("filters"),h.trigger("submit")),a("sessionStorage")){var t=sessionStorage.getItem("results"),o=JSON.parse(sessionStorage.getItem("filters"));sessionStorage.getItem("form_data")&&i(),t&&l(t),o&&s.each(o,function(){s("#"+this).trigger("click")})}}),v.on("click","a",function(s){s.preventDefault(),v.hasClass("close-filters")?(v.removeClass("close-filters"),m.slideUp()):(v.addClass("close-filters"),m.slideDown())}),h.on("submit",function(s){s.preventDefault();var e={action:"set_scholarships",nonce:o.nonce,grade:u.val(),gpa:f.val(),citizenship:p.val(),state:d.val()};r(),c(e)}),s(".column").on("click",".wsuwp-scholarships-all",function(s){s.preventDefault(),h.find("option:selected").removeAttr("selected"),h.find("input:not(:submit)").val(""),sessionStorage.removeItem("form_data"),sessionStorage.removeItem("results"),sessionStorage.removeItem("filters"),c({action:"set_scholarships",nonce:o.nonce})}),function(e){S.on("click","a",function(t){t.preventDefault();var o=s(this),a=o.html().toLowerCase();o.hasClass("sorted")?o.toggleClass("asc"):(S.find("a").removeClass("sorted asc"),o.addClass("sorted")),k.sort(function(s,e){var t=s.getAttribute("data-"+a),i=e.getAttribute("data-"+a);return"scholarship"===a&&(t=e.getAttribute("data-"+a),i=s.getAttribute("data-"+a)),o.hasClass("asc")?t-i:i-t}),k.detach().appendTo(I),e()}),m.on("change","input:checkbox",function(){var t=[],o=[];m.find("input:checkbox:checked").each(function(){o.push(s(this).attr("id")),t.push(s(this).val())}),sessionStorage.setItem("filters",JSON.stringify(o)),t.length>0?(k.not(t.join("")).hide(0),k.filter(t.join("")).show(0)):k.show(0),e()})}(function(){I.find("article:visible:odd").css("background-color","#fff"),I.find("article:visible:even").css("background-color","#eff0f1"),n()}),s(t).on("scroll",function(){s(e).scrollTop()>=I.offset().top?b.show():b.hide()}),_.on("click",function(e){e.preventDefault(),s("html, body").scrollTop(0)})}(jQuery,window,document,window.scholarships);